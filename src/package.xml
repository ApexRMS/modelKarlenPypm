<?xml version="1.0" encoding="utf-8"?>
<package name="modelKarlenPypm" displayName="Add-On to the Epidemic Package for the Karlen model" isAddOn="True" extendsPackage="epi" version="1.0.0">
  <transformers>
    <transformer
      name="modelKarlenPypm_fetchModels"
      isPrimary="True"
      displayName="modelKarlenPypm_fetchModels"
      programName="spyder"
      programArguments="fetchModels.py"
      extendsTransformer="epi_Primary"
      runContext="LocalOnly"
      isRunnable ="True">
      <datafeeds>
        <datafeed name="ModelsAvailable" displayName="Models Available" dataScope="Scenario">
          <datasheets>
            <datasheet name="ModelsAvailable" displayname="Models Available">
              <columns>
                <column name="ModelsAvailableID" dataType="Integer" isPrimary="True"/>
                <column name="ScenarioID" dataType="Integer" isOptional="True"/>
                <column name="Region" dataType="String" displayName="Region Name"/>
                <column name="Name" dataType="String" displayName="Model Name"/>
                <column name="Description" dataType="String" displayName="Description"/>
                <column name="URL" dataType="String" displayName="Model Download URL"/>
              </columns>
            </datasheet>
          </datasheets>
        </datafeed>
      </datafeeds>
      <include>
        <transformer name="modelKarlenPypm_fetchParameters"/>
      </include>
    </transformer>
    <transformer
      name="modelKarlenPypm_fetchParameters"
      displayName="modelKarlenPypm_fetchParameters"
      programName="spyder"
      programArguments="defaultParameters.py"
      extendsTransformer="epi_Primary"
      runContext="LocalOnly"
      isRunnable ="True">
      <datafeeds>
        <datafeed name="ParameterValues" displayName="Parameter Values" dataScope="Scenario">
          <datasheets>
            <datasheet name="ParameterValues" displayname="Parameter Values">
              <columns>
                <column name="ParameterValuesID" dataType="Integer" isPrimary="True"/>
                <column name="ScenarioID" dataType="Integer" isOptional="True"/>
                <column name="Name" dataType="String" displayName="Parameter Name"/>
                <column name="Description" dataType="String" displayName="Description"/>
                <column name="Type" dataType="String" displayName="Variable Type"/>
                <column name="Initial" dataType="Double" displayName="Initial Value"/>
                <column name="Min" dataType="Double" displayName="Minimum Value"/>
                <column name="Max" dataType="Double" displayName="Maximum Value"/>
                <column name="Status" dataType="String" displayName="Fixed/Variable (for fitting)"/>
                <column name="PriorDist" dataType="String" displayName="Prior Distribution"/>
                <column name="PriorMean" dataType="Double" displayName="Prior Mean"/>
                <column name="PriorSecond" dataType="Double" displayName="Prior SD/Half-width"/>
                <column name="MCMCStep" dataType="Double" displayName="MCMC step size"/>
              </columns>
            </datasheet>
          </datasheets>
        </datafeed>
      </datafeeds>
      <pipeline>
        <datafeed name="ParameterValues" type="Output"/>
        <datafeed name="epi_RunControl" type="Input"/>
      </pipeline>
    </transformer>
  </transformers>
  <layouts>
    <layout name="coreforms_LibraryDatafeeds">
      <item name="core_RConfig"/>
    </layout>
    <layout name="coreforms_ScenarioDatafeeds">
      <item name="ParameterValues" displayName="Parameter Values" appendTo="epi_Sources"/>
      <item name="ModelsAvailable" displayName="Models Available" appendTo="epi_Sources"/>
      <!-- <item name="epi_RuntimeJurisdiction"/> -->
    </layout>
  </layouts>
</package>
